<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí™ Tracker de Progreso</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            animation: float 15s infinite;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0) translateX(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) translateX(50px);
                opacity: 0;
            }
        }

        .container {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 30px;
            padding: 20px;
            max-width: 100%;
            width: 100%;
            max-height: 95vh;
            overflow-y: auto;
            box-shadow: 0 30px 90px rgba(0, 0, 0, 0.4);
            animation: slideIn 0.8s ease-out;
            position: relative;
            z-index: 10;
        }

        .container::-webkit-scrollbar {
            width: 8px;
        }

        .container::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }

        .container::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            position: relative;
        }

        .header h1 {
            font-size: 1.8em;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% {
                filter: drop-shadow(0 0 5px rgba(102, 126, 234, 0.5));
            }
            50% {
                filter: drop-shadow(0 0 20px rgba(102, 126, 234, 0.8));
            }
        }

        .date-time {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .date-box, .time-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 15px;
            font-size: 0.9em;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% {
                left: -100%;
            }
            100% {
                left: 100%;
            }
        }

        .stat-card:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin: 10px 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .stat-label {
            font-size: 0.85em;
            opacity: 0.95;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-bottom: 15px;
        }

        .day-header {
            text-align: center;
            font-weight: bold;
            color: #667eea;
            padding: 12px;
            font-size: 1em;
            text-transform: uppercase;
        }

        .day-box {
            aspect-ratio: 1;
            border: 3px solid #e0e0e0;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            background: white;
            position: relative;
            overflow: hidden;
        }

        .day-box::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(102, 126, 234, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .day-box:hover::before {
            width: 200%;
            height: 200%;
        }

        .day-box.available:hover {
            transform: scale(1.1) rotate(5deg);
            border-color: #667eea;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .day-box.completed {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: #667eea;
            color: white;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(102, 126, 234, 0.7);
            }
            50% {
                box-shadow: 0 0 0 10px rgba(102, 126, 234, 0);
            }
        }

        .day-box.completed::after {
            content: '‚úì';
            position: absolute;
            font-size: 2.5em;
            font-weight: bold;
            color: white;
            animation: checkmark 0.5s ease-out;
        }

        @keyframes checkmark {
            0% {
                transform: scale(0) rotate(-45deg);
                opacity: 0;
            }
            50% {
                transform: scale(1.2) rotate(10deg);
            }
            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        .day-box.locked {
            background: linear-gradient(135deg, #bbb 0%, #999 100%);
            cursor: not-allowed;
            opacity: 0.5;
        }

        .day-box.locked::after {
            content: 'üîí';
            position: absolute;
            font-size: 1.5em;
        }

        .day-box.today {
            border: 4px solid #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
            animation: todayPulse 2s infinite;
        }

        @keyframes todayPulse {
            0%, 100% {
                box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
            }
            50% {
                box-shadow: 0 0 40px rgba(255, 215, 0, 0.8);
            }
        }

        .day-number {
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 5px;
            position: relative;
            z-index: 1;
        }

        .day-label {
            font-size: 0.75em;
            opacity: 0.7;
            position: relative;
            z-index: 1;
        }

        .day-date {
            font-size: 0.7em;
            margin-top: 5px;
            opacity: 0.8;
            position: relative;
            z-index: 1;
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 30px;
            font-size: 0.95em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.4s ease;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 300%;
            height: 300%;
        }

        .btn:hover {
            transform: translateY(-5px);
        }

        .btn-reset {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn-reset:hover {
            box-shadow: 0 8px 30px rgba(245, 87, 108, 0.5);
        }

        .btn-export {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .btn-export:hover {
            box-shadow: 0 8px 30px rgba(79, 172, 254, 0.5);
        }

        .motivational {
            text-align: center;
            margin-top: 15px;
            padding: 15px;
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-radius: 20px;
            font-size: 1em;
            font-weight: bold;
            color: #333;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            animation: float-text 3s ease-in-out infinite;
        }

        @keyframes float-text {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        .milestone {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 50px;
            border-radius: 30px;
            box-shadow: 0 30px 90px rgba(0, 0, 0, 0.6);
            z-index: 1000;
            text-align: center;
            animation: popIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            max-width: 90%;
        }

        @keyframes popIn {
            0% {
                transform: translate(-50%, -50%) scale(0) rotate(-180deg);
                opacity: 0;
            }
            100% {
                transform: translate(-50%, -50%) scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        .milestone.show {
            display: block;
        }

        .milestone h2 {
            font-size: 2.5em;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 25px;
        }

        .milestone-emoji {
            font-size: 6em;
            margin: 25px 0;
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-20px);
            }
        }

        .milestone-text {
            font-size: 1.3em;
            color: #666;
            margin-bottom: 25px;
        }

        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 999;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .overlay.show {
            display: block;
        }

        .warning {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
            padding: 10px;
            border-radius: 15px;
            margin-top: 10px;
            text-align: center;
            font-weight: bold;
            font-size: 0.9em;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        @media (max-width: 600px) {
            .container {
                padding: 15px;
                border-radius: 20px;
            }

            .calendar {
                gap: 5px;
            }

            .day-box {
                font-size: 0.75em;
            }

            .header h1 {
                font-size: 1.5em;
            }

            .stat-number {
                font-size: 2em;
            }

            .milestone {
                padding: 25px;
            }

            .milestone-emoji {
                font-size: 3.5em;
            }

            .date-box, .time-box {
                font-size: 0.75em;
                padding: 8px 15px;
            }

            .btn {
                padding: 10px 20px;
                font-size: 0.85em;
            }
        }
    </style>
</head>
<body>
    <div class="particles" id="particles"></div>
    
    <div class="overlay" id="overlay"></div>
    
    <div class="milestone" id="milestone">
        <h2 id="milestoneTitle">¬°Logro Desbloqueado!</h2>
        <div class="milestone-emoji" id="milestoneEmoji">üéâ</div>
        <p class="milestone-text" id="milestoneText"></p>
        <button class="btn btn-export" onclick="closeMilestone()">¬°Continuar!</button>
    </div>

    <div class="container">
        <div class="header">
            <h1>üí™ Tracker de Progreso Personal</h1>
            <p>Sistema con protecci√≥n anti-trampa</p>
        </div>

        <div class="date-time">
            <div class="date-box">üìÖ <span id="currentDate"></span></div>
            <div class="time-box">‚è∞ <span id="currentTime"></span></div>
        </div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-label">Racha Actual</div>
                <div class="stat-number" id="currentStreak">0</div>
                <div class="stat-label">d√≠as</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Mejor Racha</div>
                <div class="stat-number" id="bestStreak">0</div>
                <div class="stat-label">d√≠as</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Total Completados</div>
                <div class="stat-number" id="totalDays">0</div>
                <div class="stat-label">d√≠as</div>
            </div>
        </div>

        <div class="calendar" id="calendar"></div>

        <div class="motivational" id="motivational">
            ¬°Comienza tu viaje hoy! üöÄ
        </div>

        <div class="warning">
            üîí Solo puedes marcar el d√≠a actual. ¬°Sin trampas!
        </div>

        <div class="controls">
            <button class="btn btn-reset" onclick="resetProgress()">üîÑ Reiniciar Todo</button>
            <button class="btn btn-export" onclick="exportData()">üíæ Guardar Progreso</button>
        </div>
    </div>

    <script>
        const DAYS_TO_SHOW = 90;
        const MILESTONES = {
            1: { emoji: 'üå±', text: '¬°Primer d√≠a! Has dado el primer paso' },
            3: { emoji: 'üí™', text: '3 d√≠as seguidos! Vas muy bien' },
            7: { emoji: 'üî•', text: '¬°Una semana completa! Incre√≠ble' },
            14: { emoji: '‚≠ê', text: '¬°2 semanas! Est√°s imparable' },
            21: { emoji: 'üèÜ', text: '¬°21 d√≠as! Has creado un nuevo h√°bito' },
            30: { emoji: 'üëë', text: '¬°UN MES! Eres una leyenda' },
            60: { emoji: 'üíé', text: '¬°2 MESES! Nivel diamante desbloqueado' },
            90: { emoji: 'üåü', text: '¬°90 D√çAS! Transformaci√≥n completa' }
        };

        const MOTIVATIONAL_QUOTES = [
            '¬°Sigue as√≠! Cada d√≠a cuenta üí™',
            'Tu mejor versi√≥n est√° emergiendo üåü',
            'El autocontrol es poder real üî•',
            'Est√°s construyendo disciplina üèóÔ∏è',
            'Cada d√≠a es una victoria üèÜ',
            'Tu futuro yo te agradecer√° üôè',
            'Fuerza y determinaci√≥n üíé',
            'Eres m√°s fuerte de lo que crees ‚ö°'
        ];

        let progress = {};
        let startDate = null;

        function createParticles() {
            const particles = document.getElementById('particles');
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                particles.appendChild(particle);
            }
        }

        function updateDateTime() {
            const now = new Date();
            const dateStr = now.toLocaleDateString('es-ES', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            const timeStr = now.toLocaleTimeString('es-ES');
            
            document.getElementById('currentDate').textContent = dateStr;
            document.getElementById('currentTime').textContent = timeStr;
        }

        function loadProgress() {
            const saved = localStorage.getItem('progressData');
            if (saved) {
                const data = JSON.parse(saved);
                progress = data.progress || {};
                startDate = data.startDate ? new Date(data.startDate) : null;
            }
        }

        function saveProgress() {
            const data = {
                progress: progress,
                startDate: startDate ? startDate.toISOString() : null
            };
            localStorage.setItem('progressData', JSON.stringify(data));
        }

        function getDayNumber(date) {
            if (!startDate) return null;
            const diffTime = date.getTime() - startDate.getTime();
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24)) + 1;
            return diffDays > 0 && diffDays <= DAYS_TO_SHOW ? diffDays : null;
        }

        function getDateForDay(dayNumber) {
            if (!startDate) return null;
            const date = new Date(startDate);
            date.setDate(date.getDate() + dayNumber - 1);
            return date;
        }

        function isToday(date) {
            const today = new Date();
            return date.getDate() === today.getDate() &&
                   date.getMonth() === today.getMonth() &&
                   date.getFullYear() === today.getFullYear();
        }

        function isFutureDate(date) {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            date.setHours(0, 0, 0, 0);
            return date > today;
        }

        function initCalendar() {
            const calendar = document.getElementById('calendar');
            calendar.innerHTML = '';

            const weekDays = ['Dom', 'Lun', 'Mar', 'Mi√©', 'Jue', 'Vie', 'S√°b'];
            weekDays.forEach(day => {
                const header = document.createElement('div');
                header.className = 'day-header';
                header.textContent = day;
                calendar.appendChild(header);
            });

            const today = new Date();
            
            if (!startDate) {
                startDate = new Date(today);
                saveProgress();
            }

            for (let i = 1; i <= DAYS_TO_SHOW; i++) {
                const dayDate = getDateForDay(i);
                const dayBox = document.createElement('div');
                dayBox.className = 'day-box';
                dayBox.dataset.day = i;

                const dayNumber = document.createElement('div');
                dayNumber.className = 'day-number';
                dayNumber.textContent = i;

                const dayLabel = document.createElement('div');
                dayLabel.className = 'day-label';
                dayLabel.textContent = 'D√≠a';

                const dayDateLabel = document.createElement('div');
                dayDateLabel.className = 'day-date';
                dayDateLabel.textContent = dayDate.toLocaleDateString('es-ES', { day: 'numeric', month: 'short' });

                dayBox.appendChild(dayNumber);
                dayBox.appendChild(dayLabel);
                dayBox.appendChild(dayDateLabel);

                if (progress[i]) {
                    dayBox.classList.add('completed');
                } else if (isFutureDate(new Date(dayDate))) {
                    dayBox.classList.add('locked');
                } else if (isToday(dayDate)) {
                    dayBox.classList.add('today');
                    dayBox.classList.add('available');
                } else {
                    dayBox.classList.add('available');
                }

                dayBox.addEventListener('click', () => toggleDay(i, dayDate));
                calendar.appendChild(dayBox);
            }

            updateStats();
        }

        function toggleDay(day, dayDate) {
            const dayBox = document.querySelector(`[data-day="${day}"]`);
            
            if (isFutureDate(new Date(dayDate))) {
                alert('üîí No puedes marcar d√≠as futuros. ¬°Sin trampas!');
                return;
            }

            if (!isToday(dayDate) && !progress[day]) {
                alert('‚ö†Ô∏è Solo puedes marcar el d√≠a actual si no lo marcaste antes.');
                return;
            }
            
            if (progress[day]) {
                if (!confirm('¬øSeguro que quieres desmarcar este d√≠a?')) {
                    return;
                }
                delete progress[day];
                dayBox.classList.remove('completed');
            } else {
                progress[day] = {
                    completed: true,
                    timestamp: new Date().toISOString()
                };
                dayBox.classList.add('completed');
                checkMilestone(getCurrentStreak());
            }

            saveProgress();
            updateStats();
        }

        function getCurrentStreak() {
            let streak = 0;
            const today = new Date();
            const currentDay = getDayNumber(today);
            
            if (!currentDay) return 0;
            
            for (let i = currentDay; i >= 1; i--) {
                if (progress[i]) {
                    streak++;
                } else {
                    break;
                }
            }
            return streak;
        }

        function getBestStreak() {
            let best = 0;
            let current = 0;

            for (let i = 1; i <= DAYS_TO_SHOW; i++) {
                if (progress[i]) {
                    current++;
                    best = Math.max(best, current);
                } else {
                    current = 0;
                }
            }

            return best;
        }

        function getTotalDays() {
            return Object.keys(progress).length;
        }

        function updateStats() {
            const currentStreak = getCurrentStreak();
            const bestStreak = getBestStreak();
            const totalDays = getTotalDays();

            document.getElementById('currentStreak').textContent = currentStreak;
            document.getElementById('bestStreak').textContent = bestStreak;
            document.getElementById('totalDays').textContent = totalDays;

            const motivational = document.getElementById('motivational');
            if (currentStreak > 0) {
                const randomQuote = MOTIVATIONAL_QUOTES[Math.floor(Math.random() * MOTIVATIONAL_QUOTES.length)];
                motivational.textContent = randomQuote;
            } else {
                motivational.textContent = '¬°Comienza tu viaje hoy! üöÄ';
            }
        }

        function checkMilestone(streak) {
            if (MILESTONES[streak]) {
                showMilestone(streak);
            }
        }

        function showMilestone(day) {
            const milestone = MILESTONES[day];
            document.getElementById('milestoneTitle').textContent = `¬°Logro Desbloqueado!`;
            document.getElementById('milestoneEmoji').textContent = milestone.emoji;
            document.getElementById('milestoneText').textContent = milestone.text;
            document.getElementById('milestone').classList.add('show');
            document.getElementById('overlay').classList.add('show');
        }

        function closeMilestone() {
            document.getElementById('milestone').classList.remove('show');
            document.getElementById('overlay').classList.remove('show');
        }

        function resetProgress() {
            if (confirm('¬øEst√°s seguro de que quieres reiniciar todo tu progreso? Esta acci√≥n no se puede deshacer.')) {
                progress = {};
                startDate = new Date();
                saveProgress();
                initCalendar();
            }
        }

        function exportData() {
            const data = {
                progress: progress,
                startDate: startDate,
                stats: {
                    currentStreak: getCurrentStreak(),
                    bestStreak: getBestStreak(),
                    totalDays: getTotalDays()
                },
                exportDate: new Date().toISOString()
            };
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'progreso_personal_' + new Date().toISOString().split('T')[0] + '.json';
            link.click();
            alert('¬°Progreso guardado! üíæ');
        }

        createParticles();
        loadProgress();
        initCalendar();
        updateDateTime();
        setInterval(updateDateTime, 1000);
    </script>
</body>
</html>